var globalScripts=function($){var editRequestTmpl=function(){function _HistoryTracking(){$(".multiple-select").each(function(){var title=$(this).data("title"),elem=$(this);$(this).multipleSelect({placeholder:title,minimumCountSelected:0,countSelected:$(this).attr("id")=="comments-status-changes-dd"?$(this).next().find("li.selected").text():title+"&nbsp;(#)",selectAllText:$(this).data("select-all-text"),allSelected:title,onClick:function(view){var selectedOptions=elem.multipleSelect("getSelects");$(".group-alert").addClass("hidden");currentG.collapse("show");if(elem.attr("id")=="filter-by-group-dd"){if(selectedOptions.length!=0){$(".task-group").each(function(){var isSelected=false;var that=this;$.each(selectedOptions,function(key,value){if($(that).find("> a").attr("href")!=undefined&&$(that).find("> a").attr("href").indexOf(value)>0){isSelected=true;return false}});if(isSelected){$(this).show()}else{$(this).hide()}})}else{$(".task-group").hide();$(".group-alert").removeClass("hidden")}}else{$(".task-group").find(".box-alert").hide();if($("#filter-by-group-dd").multipleSelect("getSelects")==0){$(".group-alert").removeClass("hidden").show();return false}if(selectedOptions.length!=0){if(selectedOptions.length==2){return false}$(".comment-box > div").each(function(){var that=this;var hasComment=false;$.each(selectedOptions,function(key,value){if(value=="1"){if($(that).hasClass("comment")){$(that).show()}else{$(that).hide()}}else{if($(that).hasClass("comment")){$(that).hide()}else{$(that).show()}}})});if($("#filter-by-group-dd").multipleSelect("getSelects")==0){$(".group-alert").removeClass("hidden")}}else{$(".comment-box > div").hide();findEmptyBoxes("");return false}findEmptyBoxes(selectedOptions.toString())}},onCheckAll:function(){if(elem.attr("id")=="filter-by-group-dd"){$(".task-group").show();$(".group-alert").addClass("hidden")}else{$(".comment-box > div").show();findEmptyBoxes("1,2")}},onUncheckAll:function(){if(elem.attr("id")=="filter-by-group-dd"){$(".task-group").hide();$(".group-alert").removeClass("hidden")}else{$(".comment-box > div").hide();showMessage($(".task-group .comment-box"),"no records");if($("#filter-by-group-dd").multipleSelect("getSelects")==0){$(".group-alert").removeClass("hidden").show()}}},onOpen:function(elem){var nextElem=$(elem).next(),ul=nextElem.find("ul");if(ul.outerHeight()<ul.prop("scrollHeight")&&!ul.data("width-fixed")){ul.css("width",ul.outerWidth()+$.position.scrollbarWidth());ul.data("width-fixed",true)}nextElem.css("right","auto");if(nextElem.offset().left+nextElem.find("ul").outerWidth(true)>$("body").width()){nextElem.css("right",0)}else{nextElem.css("right","auto")}nextElem.css({top:" 100%","box-shadow":"0 4px 5px rgba(0,0,0,0.15)"});if($(".table-responsive").length>0){var dropdownHeight=nextElem.outerHeight(true);if(nextElem.offset().top+dropdownHeight>$(document).scrollTop()+$("body").height()){nextElem.css({top:-1*dropdownHeight,"box-shadow":"0 -4px 5px rgba(0,0,0,0.15)"})}}}})});$("#filter-by-group-dd").multipleSelect("checkAll");$("#comments-status-changes-dd").multipleSelect("setSelects",[1]);$(".comment-box > div").each(function(){if(!$(this).hasClass("comment")){$(this).hide()}});var currentGNumber=$("#groups .task-group:first-child > a").attr("href").replace(/[^0-9]/g,""),currentG=$(".task-group").find("#group"+currentGNumber);currentG.collapse("show");function findEmptyBoxes(selectedOptions){$(".task-group").find(".box-alert").hide();$(".task-group").find(".comment-box").each(function(){if($(this).find("> div").length>0){if(selectedOptions=="1"){if($(this).find("> div.comment:visible").length==0){showMessage($(this),"no comments")}}else if(selectedOptions=="2"){if($(this).find("> div.status:visible").length==0){showMessage($(this),"no status changes")}}else{if($(this).find("> div.status:visible").length==0&&$(this).find("> div.comment:visible").length==0){showMessage($(this),"no records")}else{$(".task-group").find(".box-alert").hide()}}}else{showMessage($(this),"no records")}});currentG.collapse("show")}$("#groups .task-group > div:last-child").on("shown.bs.collapse",function(){var box=$(this).find(".comment-box"),selectedOptions=$("#comments-status-changes-dd").multipleSelect("getSelects").toString();if(box.data("processed")==undefined){if(box.find("> div").length>0){if(selectedOptions=="1"){if($(this).find(".comment-box > div.comment:visible").length==0){showMessage(box,"no comments")}}else if(selectedOptions=="2"){if($(this).find(".comment-box > div.status:visible").length==0){showMessage(box,"no status changes")}}else{if($(this).find(".comment-box > div.status:visible").length==0&&$(this).find(".comment-box > div.comment:visible").length==0){showMessage(box,"no records")}else{$(".task-group").find(".box-alert").hide()}}}else{showMessage(box,"no records")}box.data("processed",true)}if(box.data("processed")==true){if(selectedOptions=="1"&&box.find("> div.comment").length!=0){box.find(".box-alert").hide()}else if(selectedOptions=="2"&&box.find("> div.status").length!=0){box.find(".box-alert").hide()}else{if(selectedOptions=="1,2"&&box.find("> div.status").length!=0&&box.find("> div.comment").length!=0){box.find(".box-alert").hide()}}}});function showMessage(box,message){if(message=="no comments"){box.find(".box-alert h4").text("There are no comments.");box.find(".box-alert").removeClass("hidden").show()}else if(message=="no status changes"){box.find(".box-alert h4").text("There are no status changes.");box.find(".box-alert").removeClass("hidden").show()}else{box.find(".box-alert h4").text("There are no status changes or comments.");box.find(".box-alert").removeClass("hidden").show()}}$(".toggle-popover").popover({html:true,trigger:"manual",content:function(){return $(".popover-content",this).html()}}).on("mouseenter",function(){var _this=this;$(this).popover("show");$(this).siblings(".popover").on("mouseleave",function(){$(_this).popover("hide")})}).on("mouseleave",function(){var _this=this;setTimeout(function(){if(!$(".popover:hover").length){$(_this).popover("hide")}},100)});$(".panel-group-collapsible").each(function(){if($(this).find(".panel-title > a").hasClass("collapsed")){$(this).css("border-bottom","1px solid #aaa")}});$(".table-responsive").on("hidden.bs.collapse",function(e){if(!$(e.target).attr("id").match("^Notified")){$(this).parent().parent().css("border-bottom","1px solid #aaa")}}).on("shown.bs.collapse",function(e){if(!$(e.target).attr("id").match("^Notified")){$(this).parent().parent().attr("style","")}})}function hideAddTaskSection(){$(".task-triggers").slideDown(400,function(){$(".add-task-form").slideUp(600)})}function hideRejectTaskSection(){$(".task-triggers").slideDown(400,function(){$(".reject-task").slideUp(600)})}function init(){_HistoryTracking();$(".task-triggers").find("a.add-slide").on("click",function(e){e.preventDefault();$(this).parent("div").slideToggle(400,function(){$(".add-task-form").slideToggle(600)})});$(".edit-col").find(".btn-default").on("click",function(e){e.preventDefault();$(".task-triggers").slideToggle(400,function(){$(".add-task-form").slideToggle(600)})});$(".task-triggers").find("a.reject-slide").on("click",function(e){e.preventDefault();$(this).parent("div").slideToggle(400);$(".reject-task").slideToggle(600)});$(".reject-task").find(".btn-default").on("click",function(e){e.preventDefault();$(".task-triggers").slideToggle(400,function(){$(".reject-task").slideToggle(600)})});multiTmpl.init()}return{init:init,hideAddTaskSection:hideAddTaskSection,hideRejectTaskSection:hideRejectTaskSection}}();var addRequestTmpl=function(){var init=function(){$("#data_Requester_UserIDUser").attr("autocomplete","off");multiTmpl.init()};return{init:init}}();var multiTmpl=function(){var init=function(){};return{init:init}}();return{editRequestTmpl:editRequestTmpl,addRequestTmpl:addRequestTmpl,multiTmpl:multiTmpl}}(jQuery);$(function(){!!$("#editRequesTmpl").length&&globalScripts.editRequestTmpl.init();!!$("#addRequestTmpl").length&&globalScripts.addRequestTmpl.init()});